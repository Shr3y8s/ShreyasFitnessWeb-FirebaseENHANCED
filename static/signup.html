<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up - SHREY.FIT</title>
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="index.html" class="logo-link">
                    <div class="logo-container">
                        <div class="logo-text">
                            <span class="brand-name">SHREY<span class="brand-dot">.</span>FIT</span>
                        </div>
                    </div>
                </a>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">Home</a>
                </li>
                <li class="nav-item">
                    <a href="about.html" class="nav-link">About Me</a>
                </li>
                <li class="nav-item">
                    <a href="services.html" class="nav-link">Services</a>
                </li>
                <li class="nav-item">
                    <a href="connect.html" class="nav-link">Connect</a>
                </li>
                <li class="nav-item">
                    <a href="faq.html" class="nav-link">FAQ</a>
                </li>
                <li class="nav-item">
                    <a href="blog.html" class="nav-link">Blog</a>
                </li>
                <li class="nav-item">
                     <a href="http://localhost:3000/login" class="nav-link account-btn">Sign Up / Login</a>
                </li>
            </ul>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- Sign Up Section -->
    <section class="signup-section">
        <div class="container">
            <div class="section-header">
                <h2>Join SHREY.FIT</h2>
                <p>Create your account to start your fitness journey</p>
            </div>
            
            <!-- This is where React will mount -->
            <div id="react-signup-form"></div>
            
            <hr class="section-divider">
            <div class="section-header">
                <h2>Traditional HTML Form</h2>
                <p>Original signup form for reference</p>
            </div>
            
            <div class="signup-container">
                <div class="signup-benefits">
                    <div class="benefit-header">
                        <h3>Benefits of Joining</h3>
                    </div>
                    <ul class="benefits-list">
                        <li>
                            <i class="fas fa-check-circle"></i>
                            <span>Personalized fitness programs tailored to your goals</span>
                        </li>
                        <li>
                            <i class="fas fa-check-circle"></i>
                            <span>Track your progress and see real results</span>
                        </li>
                        <li>
                            <i class="fas fa-check-circle"></i>
                            <span>Exclusive access to workout videos and nutrition guides</span>
                        </li>
                        <li>
                            <i class="fas fa-check-circle"></i>
                            <span>Direct messaging with your personal trainer</span>
                        </li>
                        <li>
                            <i class="fas fa-check-circle"></i>
                            <span>Schedule and manage your training sessions</span>
                        </li>
                        <li>
                            <i class="fas fa-check-circle"></i>
                            <span>Join our supportive fitness community</span>
                        </li>
                    </ul>
                </div>
                
                <div class="signup-form-container">
                    <form class="signup-form" action="#" method="post">
                        <div class="form-group">
                            <label for="fullname"><i class="fas fa-user"></i> Full Name <span class="required">*</span></label>
                            <input type="text" id="fullname" name="fullname" placeholder="Enter your full name" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="email"><i class="fas fa-envelope"></i> Email Address <span class="required">*</span></label>
                            <input type="email" id="email" name="email" placeholder="Enter your email address" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="phone"><i class="fas fa-phone"></i> Phone Number</label>
                            <input type="tel" id="phone" name="phone" placeholder="Enter your phone number">
                        </div>
                        
                        <div class="form-group">
                            <label for="password"><i class="fas fa-lock"></i> Password <span class="required">*</span></label>
                            <input type="password" id="password" name="password" placeholder="Create a password" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="confirm-password"><i class="fas fa-lock"></i> Confirm Password <span class="required">*</span></label>
                            <input type="password" id="confirm-password" name="confirm-password" placeholder="Confirm your password" required>
                        </div>
                        
                        <div class="checkbox-group-enhanced">
                            <div class="custom-checkbox">
                                <input type="checkbox" id="terms" name="terms" required>
                                <label for="terms">
                                    <div class="checkmark"></div>
                                    <div class="checkbox-text">
                                        <strong>I agree to the Terms and Privacy Policy</strong>
                                        <small>By signing up, you agree to our Terms of Service and Privacy Policy</small>
                                    </div>
                                </label>
                            </div>
                        </div>
                        
                        <button type="submit" class="btn-primary-enhanced">
                            <i class="fas fa-user-plus"></i>
                            Create Account
                        </button>
                        
                        <div class="form-footer">
                            <p>Already have an account? <a href="http://localhost:3000/login" class="login-link">Login</a></p>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>SHREY.FIT</h3>
                    <p>Your certified fitness professional dedicated to helping you achieve your goals through personalized training and coaching.</p>
                </div>
                <div class="footer-section">
                    <h4>Services</h4>
                    <ul>
                        <li><a href="services.html">In-Person Training</a></li>
                        <li><a href="services.html">Online Coaching</a></li>
                        <li><a href="services.html">Complete Transformation</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="about.html">About Me</a></li>
                        <li><a href="blog.html">Blog</a></li>
                        <li><a href="connect.html">Contact</a></li>
                        <li><a href="faq.html">FAQ</a></li>
                        <li><a href="http://localhost:3000/login">My Account</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 SHREY.FIT. All rights reserved.</p>
            </div>
        </div>
    </footer>


    <script src="js/script.js"></script>
    
    <!-- Firebase SDK - Make sure these are loaded in the correct order -->
    <script src="https://www.gstatic.com/firebasejs/12.1.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/12.1.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/12.1.0/firebase-firestore-compat.js"></script>
    <!-- Our authentication script - loaded after Firebase SDK -->
    <script src="js/auth.js"></script>
    <!-- Add a small script to catch and log Firebase errors -->
<script>
      window.addEventListener('error', function(event) {
        if (event.message && event.message.includes('firebase')) {
          console.error('Firebase Error:', event.message);
        }
      });
      
      // Monitor React component loading
      document.addEventListener('DOMContentLoaded', function() {
        console.log('Checking for React component loading...');
        
        // Check if React component loads after a short delay
        setTimeout(function() {
          const reactForm = document.getElementById('react-signup-form');
          if (reactForm && reactForm.children.length > 0) {
            console.log('React form loaded successfully!');
            // Add a success notification
            const notification = document.createElement('div');
            notification.className = 'react-loaded-notification';
            notification.innerHTML = '<div class="notification-content"><i class="fas fa-check-circle"></i> React Stripe Integration Loaded</div>';
            reactForm.prepend(notification);
          } else {
            console.warn('React form not detected - check webpack build and bundle.');
          }
        }, 1000); // Check after 1 second to give React time to render
      });
    </script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const signupForm = document.querySelector('.signup-form');
        
        if (signupForm) {
          signupForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form values
            const name = document.getElementById('fullname').value;
            const email = document.getElementById('email').value;
            const phone = document.getElementById('phone').value;
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirm-password').value;
            
            // Validate form
            if (password !== confirmPassword) {
              alert('Passwords do not match');
              return;
            }
            
            // Disable the submit button
            const submitButton = this.querySelector('button[type="submit"]');
            submitButton.disabled = true;
            
            // Create user
            signUp(email, password, name, phone)
              .catch(error => {
                alert(`Error: ${error.message}`);
                submitButton.disabled = false;
              });
          });
        }
        
        // Add Google Sign In option
        const socialLoginDiv = document.createElement('div');
        socialLoginDiv.className = 'social-login';
        socialLoginDiv.innerHTML = `
          <p>Or sign up with:</p>
          <button type="button" id="google-signin" class="btn-secondary-enhanced">
            <i class="fab fa-google"></i> Google
          </button>
        `;
        
        // Insert after the signup form but before the footer
        const formFooter = document.querySelector('.form-footer');
        if (formFooter) {
          formFooter.after(socialLoginDiv);
          
          // Add event listener for Google Sign In
      document.getElementById('google-signin').addEventListener('click', function() {
        signInWithGoogle().catch(error => {
          alert(`Error: ${error.message}`);
        });
      });
    }
    
    // Listen for signup success event
    document.addEventListener('signupSuccess', function(event) {
      // Get user details from event
      const { email, name } = event.detail;
      
      // Get the signup form container
      const signupFormContainer = document.querySelector('.signup-form-container');
      if (!signupFormContainer) return;
      
      // Hide the signup form
      const signupForm = signupFormContainer.querySelector('form');
      if (signupForm) {
        signupForm.style.display = 'none';
      }
      
      // Create success message
      const successMessage = document.createElement('div');
      successMessage.className = 'success-message';
      successMessage.innerHTML = `
        <div class="success-icon">
          <i class="fas fa-check-circle"></i>
        </div>
        <h3>Account Created Successfully!</h3>
        <p>Thank you for joining SHREY.FIT, <strong>${name}</strong>!</p>
        <p>Your account has been created. Please log in with your credentials to access your dashboard.</p>
        <p class="email-display">${email}</p>
        <button id="login-now-btn" class="btn-primary-enhanced">
          <i class="fas fa-sign-in-alt"></i>
          <span>Login Now</span>
        </button>
      `;
      
      // Add the success message to the container
      signupFormContainer.appendChild(successMessage);
      
      // Add event listener for the Login Now button
      setTimeout(() => {
        const loginButton = document.getElementById('login-now-btn');
        if (loginButton) {
          loginButton.addEventListener('click', function() {
            // Check if the user is already logged in (autoLogin flag)
            if (event.detail.autoLogin) {
        // If user is already logged in, go straight to dashboard
        window.location.href = 'http://localhost:3000/dashboard';
            } else {
              // Otherwise, go to login page with email prefilled
              window.location.href = 'http://localhost:3000/login?email=' + encodeURIComponent(email);
            }
          });
        }
      }, 100);
    });
  });
</script>

<style>
  /* Section divider */
  .section-divider {
    margin: 3rem 0;
    border: 0;
    border-top: 1px solid #e0e0e0;
    position: relative;
  }
  
  .section-divider::before {
    content: "OR";
    position: absolute;
    top: -10px;
    left: 50%;
    transform: translateX(-50%);
    background: white;
    padding: 0 1rem;
    color: #9e9e9e;
    font-size: 0.9rem;
  }
  
  /* React loaded notification */
  .react-loaded-notification {
    margin-bottom: 1rem;
    padding: 0.75rem 1rem;
    background-color: #e8f5e9;
    border-radius: 4px;
    border-left: 4px solid #4caf50;
    color: #2e7d32;
  }
  
  .notification-content {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  
  /* Success message styling */
  .success-message {
    background-color: #e8f5e9;
    border-left: 4px solid #4caf50;
    color: #2e7d32;
    padding: 30px;
    margin: 20px 0;
    border-radius: 4px;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    animation: fadeIn 0.5s ease-in-out;
  }
  
  .success-message .success-icon {
    font-size: 60px;
    margin-bottom: 20px;
    color: #4caf50;
  }
  
  .success-message h3 {
    margin-bottom: 15px;
    font-size: 1.6rem;
  }
  
  .success-message p {
    margin: 5px 0 15px;
    line-height: 1.5;
  }
  
  .success-message .email-display {
    font-weight: 500;
    margin: 10px 0 20px;
    padding: 8px 16px;
    background: rgba(255, 255, 255, 0.7);
    border-radius: 4px;
    border: 1px solid #c8e6c9;
  }
  
  #login-now-btn {
    margin-top: 15px;
    padding: 12px 24px;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>

<!-- ADD THIS LINE at the end of your body section -->
<script src="dist/signup-bundle.js"></script>
</body>
</html>
